{"version":3,"sources":["scripts/main.js"],"names":["cells","document","querySelectorAll","score","querySelector","button","startMassage","winMassage","generateNewCell","addUpdatedClassCell","i","Math","floor","random","length","four","every","a","className","innerText","addSortRowClasses","direction","rows","classes","row","sortRowLeft","sortRigth","cell","push","sortColumnClasses","classesColumn","count","top","bottom","addColumnClasses","some","map","column","index","indexOf","value","slice","sumContantRow","cellNext","nextElementSibling","innerHTML","previousElementSibling","sumContantColumn","b","sibling","checkGameOver","nextCell","classList","remove","addEventListener","add","location","reload","e","code"],"mappings":"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","file":"main.44faaf2f.js","sourceRoot":"../src","sourcesContent":["'use strict';\n\nlet cells = [...document.querySelectorAll('td')];\nconst score = document.querySelector('.game-score');\nconst button = document.querySelector('.start');\nconst startMassage = document.querySelector('.message-start');\nconst winMassage = document.querySelector('.message-win');\n\nbutton.addEventListener('click', () => {\n  startMassage.classList.add('hidden');\n  button.className = 'button restart';\n  button.innerText = 'Restart';\n\n  const restart = document.querySelector('.restart');\n\n  restart.addEventListener('click', () => {\n    location.reload();\n  });\n\n  if (button.className === 'button restart') {\n    document.addEventListener('keydown', (e) => {\n      if (cells.some(cell => cell.innerHTML === '2048')) {\n        winMassage.classList.remove('hidden');\n      }\n\n      if (e.code === 'ArrowLeft') {\n        sumContantRow('left');\n        addSortRowClasses('left');\n      }\n\n      if (e.code === 'ArrowRight') {\n        sumContantRow('rigth');\n        addSortRowClasses('right');\n      }\n\n      if (e.code === 'ArrowUp') {\n        sumContantColumn('up');\n      }\n\n      if (e.code === 'ArrowDown') {\n        sumContantColumn('down');\n      }\n      generateNewCell();\n      checkGameOver();\n    });\n  }\n});\n\ngenerateNewCell();\ngenerateNewCell();\n\nfunction generateNewCell() {\n  addUpdatedClassCell();\n\n  const i = Math.floor(Math.random() * cells.length);\n  const four = Math.floor(Math.random() * 9);\n\n  if (cells.every(a => a.className !== 'field-cell')) {\n    return;\n  }\n\n  if (cells[i].className === 'field-cell') {\n    cells[i].className = four === 4\n      ? 'field-cell field-cell--4' : 'field-cell field-cell--2';\n\n    cells[i].innerText = four === 4 ? 4 : 2;\n\n    return;\n  }\n  generateNewCell();\n}\n\nfunction addSortRowClasses(direction) {\n  const rows = [...document.querySelectorAll('.field-row')];\n  const classes = [];\n\n  for (const row of [...rows]) {\n    const sortRowLeft = [];\n    const sortRigth = [];\n\n    for (const cell of [...row.cells]) {\n      if (cell.className === 'field-cell') {\n        sortRigth.push(cell.className);\n      } else {\n        sortRowLeft.push(cell.className);\n      }\n    }\n\n    if (direction === 'left') {\n      classes.push(...sortRowLeft, ...sortRigth);\n    };\n\n    if (direction === 'right') {\n      classes.push(...sortRigth, ...sortRowLeft);\n    }\n  }\n\n  for (let i = 0; i < cells.length; i++) {\n    cells[i].className = classes[i];\n  }\n}\n\nfunction sortColumnClasses() {\n  const classesColumn = [];\n  let count = -1;\n\n  for (let i = 0; i < cells.length; i++) {\n    count++;\n\n    if (!classesColumn[i] && i <= 3) {\n      classesColumn[i] = {\n        top: [],\n        bottom: [],\n      };\n    }\n\n    if (cells[i].className === 'field-cell') {\n      classesColumn[count].top.push(cells[i].className);\n    } else {\n      classesColumn[count].bottom.push(cells[i].className);\n    }\n\n    if (count === 3) {\n      count = -1;\n    }\n  }\n\n  return classesColumn;\n}\n\nfunction addColumnClasses(direction) {\n  const some = direction === 'down'\n    ? sortColumnClasses().map(a => [...a.top, ...a.bottom])\n    : sortColumnClasses().map(a => [...a.bottom, ...a.top]);\n\n  let row = -1;\n  let column = 0;\n\n  for (let i = 0; i < cells.length; i++) {\n    row++;\n\n    cells[i].className = some[row][column];\n\n    if (row === 3) {\n      row = -1;\n      column++;\n    }\n  }\n}\n\nfunction addUpdatedClassCell() {\n  cells = [...document.querySelectorAll('td')];\n\n  for (let i = 0; i < cells.length; i++) {\n    if (cells[i].className === 'field-cell') {\n      cells[i].innerText = '';\n    }\n\n    if (cells[i].className !== 'field-cell') {\n      const index = cells[i].className.indexOf('--');\n      const value = cells[i].className.slice(index + 2);\n\n      cells[i].innerText = value;\n    }\n  }\n}\n\nfunction sumContantRow(direction) {\n  const rows = [...document.querySelectorAll('.field-row')];\n\n  for (const row of rows) {\n    if (direction === 'left') {\n      for (let i = 0; i < row.cells.length - 1; i++) {\n        addSortRowClasses('left');\n        addUpdatedClassCell();\n\n        const cell = row.cells[i];\n        const cellNext = cell.nextElementSibling;\n\n        if ((cell.innerText === cellNext.innerText)\n          && cell.innerText.length) {\n          cell.innerText = (+cell.innerText * 2);\n          cell.className = `field-cell field-cell--${cell.innerText}`;\n          score.innerHTML = +score.innerHTML + +cell.innerHTML;\n          cellNext.className = 'field-cell';\n          cellNext.innerText = '';\n          addSortRowClasses('left');\n        }\n      }\n    }\n\n    if (direction === 'rigth') {\n      for (let i = row.cells.length - 1; i > 0; i--) {\n        addSortRowClasses('right');\n        addUpdatedClassCell();\n\n        const cell = row.cells[i];\n        const cellNext = cell.previousElementSibling;\n\n        if ((cell.innerText === cellNext.innerText)\n          && cell.innerText.length) {\n          cell.innerText = (+cell.innerText * 2);\n          cell.className = `field-cell field-cell--${cell.innerText}`;\n          score.innerHTML = +score.innerHTML + +cell.innerHTML;\n          cellNext.className = 'field-cell';\n          cellNext.innerText = '';\n          addSortRowClasses('right');\n        }\n      }\n    }\n  }\n}\n\nfunction sumContantColumn(direction) {\n  const rows = [...document.querySelectorAll('.field-row')];\n\n  if (direction === 'up') {\n    for (let b = 0; b < rows.length - 1; b++) {\n      const sibling = rows[b].nextElementSibling;\n\n      for (let i = 0; i < rows.length; i++) {\n        addColumnClasses();\n        addUpdatedClassCell();\n\n        const cell = rows[b].cells[i];\n\n        if (cell.innerText === sibling.cells[i].innerText && cell.innerText) {\n          cell.innerText = +cell.innerText * 2;\n          cell.className = `field-cell field-cell--${cell.innerText}`;\n          score.innerHTML = +score.innerHTML + +cell.innerHTML;\n          sibling.cells[i].className = 'field-cell';\n          sibling.cells[i].innerText = '';\n          addColumnClasses();\n        }\n      }\n    }\n  }\n\n  if (direction === 'down') {\n    for (let b = rows.length - 1; b > 0; b--) {\n      const sibling = rows[b].previousElementSibling;\n\n      for (let i = 0; i < rows.length; i++) {\n        addColumnClasses('down');\n        addUpdatedClassCell();\n\n        const cell = rows[b].cells[i];\n\n        if (cell.innerText === sibling.cells[i].innerText && cell.innerText) {\n          cell.innerText = +cell.innerText * 2;\n          cell.className = `field-cell field-cell--${cell.innerText}`;\n          score.innerHTML = +score.innerHTML + +cell.innerHTML;\n          sibling.cells[i].className = 'field-cell';\n          sibling.cells[i].innerText = '';\n          addColumnClasses('down');\n        }\n      }\n    }\n  }\n}\n\nfunction checkGameOver() {\n  const rows = [...document.querySelectorAll('.field-row')];\n  let count = 0;\n\n  for (let b = rows.length - 1; b >= 0; b--) {\n    const row = rows[b];\n\n    for (let i = 1; i < row.cells.length; i++) {\n      const cell = row.cells[i].innerText;\n      const nextCell = row.cells[i - 1].innerText;\n\n      if (b === 0) {\n        if (cell === nextCell) {\n          count++;\n        }\n      } else {\n        if (cell === nextCell\n          || cell\n          === row.previousElementSibling.cells[i].innerText) {\n          count++;\n        }\n      }\n    }\n  }\n\n  if (!cells.some(cell => cell.className === 'field-cell') && !count) {\n    const loseMassage = document.querySelector('.message-lose');\n\n    loseMassage.classList.remove('hidden');\n  }\n}\n"]}